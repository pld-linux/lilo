Summary:	Boot loader for Linux and other operating systems
Summary(de):	Boot-Lader für Linux und andere Betriebssysteme
Summary(fr):	Chargeur de boot pour Linux et autres systèmes d'exploitation
Summary(pl):	Boot Loader dla Linuxa i innych systemów operacyjnych
Summary(tr):	Linux ve diger iþletim sistemleri için sistem yükleyici
Name:		lilo
Version:	22.0
Release:	1
Epoch:		1
License:	MIT
Group:		Applications/System
Group(de):	Applikationen/System
Group(pl):	Aplikacje/System
Source0:	ftp://brun.dyndns.org/pub/linux/lilo/beta/%{name}-%{version}-beta.tar.gz
Source1:	%{name}-pldblack.bmp
Source2:	%{name}.conf
Patch0:		%{name}-makefile.patch
BuildRequires:	bin86 >= 0.15
Provides:	bootloader
Exclusivearch:	%{ix86}
BuildRoot:	%{tmpdir}/%{name}-%{version}-root-%(id -u -n)

%description
Lilo is repsonsible for loading your linux kernel from either a floppy
or a hard drive and giving it control of the system. It can also be
used to boot many other operating sysetms, including the BSD variants,
DOS, and OS/2.

%description -l de
Lilo ist zuständig für das Laden des Linux-Kernels, entweder von einer
Diskette oder einer Festplatte, und übergibt diesem dann die Kontrolle
über das System. Es kann auch benutzt werden, um viele andere
Betriebssysteme zu laden, etwa die BSD-Varianten, DOS und OS/2.

%description -l pl
Lilo jest odpowiedzialny za ³adowanie j±dra systemu Linux z dysku
twardego lub stacji dyskietek. Mo¿e tak¿e byæ u¿ywany do startowania
innych systemów operacyjnych, takich jak ró¿ne warianty BSD czy OS/2,
jak równie¿ DOS.

%description -l tr
Lilo, Linux çekirdeðinin disket veya sabit disk sürücüden
yüklenmesinden sorumludur. Ayrýca pek çok diðer iþletim sisteminin de
açýlýþta yüklenmesi için kullanýlýr. Bu sistemler arasýnda BSD
türevleri, DOS ve OS/2 sayýlabilir.

%prep
%setup -q -n %{name}-%{version}-beta
%patch0 -p1

%build
%{__make} OPTIMIZE="%{rpmcflags}" LDFLAGS="%{rpmldflags}"

%install
rm -rf $RPM_BUILD_ROOT
install -d $RPM_BUILD_ROOT{%{_sysconfdir},%{_mandir}/man{5,8}}

%{__make} install ROOT=$RPM_BUILD_ROOT

#touch $RPM_BUILD_ROOT%{_sysconfdir}/lilo.conf
install %{SOURCE2} $RPM_BUILD_ROOT%{_sysconfdir}/lilo.conf

install %{SOURCE1} $RPM_BUILD_ROOT/boot

gzip -9nf README CHANGES INCOMPAT

%post
#if [ -s %{_sysconfdir}/lilo.conf]; then
#	/sbin/lilo
#fi
[ ! -r /etc/sysconfig/rc-boot/lilo_functions.sh ] || ln -sf /etc/sysconfig/rc-boot/lilo_functions.sh /etc/sysconfig/rc-boot/functions.sh
echo "Remember to type \"lilo\" after upgrade. Or rc-boot if you are using it."


%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(644,root,root,755)
%doc *.gz QuickInst
%attr(600,root,root) %config(noreplace) %verify(not size mtime md5) %{_sysconfdir}/*
%attr(640,root,root) /boot/chain.b
%attr(640,root,root) /boot/os2_d.b
%attr(640,root,root) /boot/boot-*.b
%attr(640,root,root) /boot/mbr.b
%attr(640,root,root) /boot/lilo-pldblack.bmp
%attr(640,root,root) %config(noreplace) %verify(not link) /boot/boot.b
%attr(755,root,root) /sbin/lilo
%{_mandir}/man[58]/*
